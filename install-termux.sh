#!/data/data/com.termux/files/usr/bin/bash

echo "=== INSTALL SCRIPT FOR SMS-SPAM WEB ==="

# -----------------------------
# ‡∏ï‡∏£‡∏ß‡∏à Python
# -----------------------------
if ! command -v python >/dev/null 2>&1; then
    echo "[*] ‡πÑ‡∏°‡πà‡∏û‡∏ö Python -> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á..."
    pkg update -y
    pkg install python -y
else
    echo "[OK] ‡∏û‡∏ö Python ‡πÅ‡∏•‡πâ‡∏ß"
fi

# -----------------------------
# ‡∏ï‡∏£‡∏ß‡∏à pip
# -----------------------------
if ! command -v pip >/dev/null 2>&1; then
    echo "[*] ‡πÑ‡∏°‡πà‡∏û‡∏ö pip -> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á..."
    pkg install python -y
else
    echo "[OK] ‡∏û‡∏ö pip ‡πÅ‡∏•‡πâ‡∏ß"
fi

# -----------------------------
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies ‡∏à‡∏≤‡∏Å pip-install.json
# -----------------------------
JSON_FILE="pip-install.json"
if [ ! -f "$JSON_FILE" ]; then
    echo "[!] ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå pip-install.json"
    exit 1
fi

echo "[*] ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies ‡∏à‡∏≤‡∏Å pip-install.json..."
while read -r package; do
    if [ -n "$package" ]; then
        echo "  -> pip install $package"
        pip install "$package"
    fi
done < <(jq -r '.[]' pip-install.json)

echo "[OK] ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢"

# -----------------------------
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á RUN-SMS-WEB
# -----------------------------
TARGET="$PREFIX/bin/RUN-SMS-WEB"
SOURCE="SMS-RUN-WEB-TERMUX.sh"

if [ ! -f "$SOURCE" ]; then
    echo "[!] ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå $SOURCE"
    exit 1
fi

echo "[*] ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á RUN-SMS-WEB ..."
mv "$SOURCE" "$TARGET"
chmod +x "$TARGET"

echo "[OK] ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á RUN-SMS-WEB ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!"

# -----------------------------
# ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
# -----------------------------
echo "[*] ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á..."
rm -f install-termux.sh
rm -f pip-install.json

echo "[OK] ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!"
sleep 0.5
echo "[OK] ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢"
sleep 1
# ========================================================
# ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà: ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì
# ========================================================

# 1. ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ ‡πÇ‡∏õ‡∏£‡∏î‡∏≠‡πà‡∏≤‡∏ô
clear
echo "#################################################"
echo "#                                               #"
echo "#           ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ ‡πÇ‡∏õ‡∏£‡∏î‡∏≠‡πà‡∏≤‡∏ô !!!                 #"
echo "#        (EXPLANATION : PLEASE READ)            #"
echo "#                                               #"
echo "#################################################"
echo ""
read -p ">>> ‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠..."

# 2. ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì
clear
echo "#################################################"
echo "#                                               #"
echo "#             ‡∏Ç‡∏≠‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ô‡∏µ‡πâ               #"
echo "#                 (THANK YOU)                   #"
echo "#                                               #"
echo "#################################################"
echo ""
read -p ">>> ‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠..."

# 3. ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÑ‡∏ü‡∏•‡πå
clear
echo "================================================="
echo "           üìò ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (MANUAL)        "
echo "================================================="
echo ""
echo "üìÇ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö:"
echo "   1. SMS-Fast.py  -> ‡∏¢‡∏¥‡∏á‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å‡πÜ"
echo "   2. SMS-Slow.py  -> ‡∏¢‡∏¥‡∏á‡∏ä‡πâ‡∏≤‡πÅ‡∏ï‡πà‡∏ä‡∏±‡∏ß‡∏£‡πå"
echo "   3. RUN-WEB.py   -> ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö (Web Interface)"
echo ""
echo "-------------------------------------------------"
echo "üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ 2 ‡πÅ‡∏ö‡∏ö):"
echo "-------------------------------------------------"
echo ""
echo "‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ß‡πá‡∏ö (‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)"
echo "   ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á: RUN-SMS-WEB"
echo "   (‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏¥‡∏î Browser ‡πÑ‡∏õ‡∏ó‡∏µ‡πà http://localhost:8080)"
echo ""
echo "‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô Terminal (Manual)"
echo "   1. ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°:"
echo "      cd program"
echo ""
echo "   2. ‡∏™‡∏±‡πà‡∏á‡∏£‡∏±‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£:"
echo "      - ‡∏¢‡∏¥‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πá‡∏ß: python SMS-Fast.py"
echo "      - ‡∏¢‡∏¥‡∏á‡πÅ‡∏ö‡∏ö‡∏ä‡πâ‡∏≤: python SMS-Slow.py"
echo ""
echo "================================================="
sleep 1
echo "[OK] ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢"
echo "================================================="
